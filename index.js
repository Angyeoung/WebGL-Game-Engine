var a=class n{x;y;z;constructor(t,e,r){this.x=t,this.y=e,this.z=r}static get zero(){return new n(0,0,0)}static get one(){return new n(1,1,1)}static get up(){return new n(0,1,0)}static get down(){return new n(0,-1,0)}static get right(){return new n(1,0,0)}static get left(){return new n(-1,0,0)}static get forward(){return new n(0,0,1)}static get back(){return new n(0,0,-1)}get magnitude(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}static copy(t,e){return e=e||new n(0,0,0),e.x=t.x,e.y=t.y,e.z=t.z,e}static transform(t,e,r){r=r||new n(0,0,0);let o=t.x*e[0]+t.y*e[4]+t.z*e[8]+e[12],i=t.x*e[1]+t.y*e[5]+t.z*e[9]+e[13],s=t.x*e[2]+t.y*e[6]+t.z*e[10]+e[14],c=t.x*e[3]+t.y*e[7]+t.z*e[11]+e[15];return r.x=o/c,r.y=i/c,r.z=s/c,r}static cross(t,e,r){r=r||new n(0,0,0);let o=t.z*e.x-t.x*e.z,i=t.x*e.y-t.y*e.x;return r.x=t.y*e.z-t.z*e.y,r.y=o,r.z=i,r}static dot(t,e){return t.x*e.x+t.y*e.y+t.z*e.z}static equals(t,e){return!(t.x!==e.x||t.y!==e.y||t.z!==e.z)}static sub(t,e,r){return r=r||new n(0,0,0),r.x=t.x-e.x,r.y=t.y-e.y,r.z=t.z-e.z,r}static add(t,e,r){return r=r||new n(0,0,0),r.x=t.x+e.x,r.y=t.y+e.y,r.z=t.z+e.z,r}static scale(t,e,r){return r=r||new n(0,0,0),r.x=t.x*e,r.y=t.y*e,r.z=t.z*e,r}static normalize(t,e){e=e||new n(0,0,0);let r=t.magnitude;if(r===0)return e;let o=1/r;return e.x=t.x*o,e.y=t.y*o,e.z=t.z*o,e}static f32(t,e){return e=e||new Float32Array(3),e[0]=t.x,e[1]=t.y,e[2]=t.z,e}},l=class n{static zero(t){return t=t||new Float32Array(16),t[0]=0,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=0,t}static identity(t){return t=n.zero(t),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}static setScalar(t,e){return e=e||new Float32Array(16),n.identity(e),e[0]=t.x,e[5]=t.y,e[10]=t.z,e}static lookAt(t,e,r=a.up,o){o=o||n.identity();let i=a.sub(e,t);a.normalize(i,i);let s=a.cross(r,i);a.normalize(s,s);let c=a.cross(i,s);return a.normalize(c,c),o[0]=s.x,o[1]=c.x,o[2]=i.x,o[4]=s.y,o[5]=c.y,o[6]=i.y,o[8]=s.z,o[9]=c.z,o[10]=i.z,o[12]=-a.dot(s,t),o[13]=-a.dot(c,t),o[14]=-a.dot(i,t),o}static perspectiveFovLH(t,e,r,o,i){i=i||n.identity();let s=1/Math.tan(t*.5);return i[0]=s/e,i[5]=s,i[10]=-o/(r-o),i[11]=1,i[14]=r*o/(r-o),i[15]=0,i}static rotate(t,e){return n.rotateX(t,e.x),n.rotateY(t,e.y),n.rotateZ(t,e.z),t}static rotateX(t,e){let r=Y(e),o=Math.sin(r),i=Math.cos(r);return n.multiply(t,new Float32Array([1,0,0,0,0,i,o,0,0,-o,i,0,0,0,0,1]),t),t}static rotateY(t,e){let r=Y(e),o=Math.sin(r),i=Math.cos(r);return n.multiply(t,new Float32Array([i,0,-o,0,0,1,0,0,o,0,i,0,0,0,0,1]),t)}static rotateZ(t,e){let r=Y(e),o=Math.sin(r),i=Math.cos(r);return n.multiply(t,new Float32Array([i,-o,0,0,o,i,0,0,0,0,1,0,0,0,0,1]),t)}static translation(t,e){return e=e||n.identity(),e[12]=t.x,e[13]=t.y,e[14]=t.z,e}static multiply(t,e,r){r=r||new Float32Array(16);let o=t[0]*e[0]+t[1]*e[4]+t[2]*e[8]+t[3]*e[12],i=t[0]*e[1]+t[1]*e[5]+t[2]*e[9]+t[3]*e[13],s=t[0]*e[2]+t[1]*e[6]+t[2]*e[10]+t[3]*e[14],c=t[0]*e[3]+t[1]*e[7]+t[2]*e[11]+t[3]*e[15];return r[0]=o,r[1]=i,r[2]=s,r[3]=c,o=t[4]*e[0]+t[5]*e[4]+t[6]*e[8]+t[7]*e[12],i=t[4]*e[1]+t[5]*e[5]+t[6]*e[9]+t[7]*e[13],s=t[4]*e[2]+t[5]*e[6]+t[6]*e[10]+t[7]*e[14],c=t[4]*e[3]+t[5]*e[7]+t[6]*e[11]+t[7]*e[15],r[4]=o,r[5]=i,r[6]=s,r[7]=c,o=t[8]*e[0]+t[9]*e[4]+t[10]*e[8]+t[11]*e[12],i=t[8]*e[1]+t[9]*e[5]+t[10]*e[9]+t[11]*e[13],s=t[8]*e[2]+t[9]*e[6]+t[10]*e[10]+t[11]*e[14],c=t[8]*e[3]+t[9]*e[7]+t[10]*e[11]+t[11]*e[15],r[8]=o,r[9]=i,r[10]=s,r[11]=c,o=t[12]*e[0]+t[13]*e[4]+t[14]*e[8]+t[15]*e[12],i=t[12]*e[1]+t[13]*e[5]+t[14]*e[9]+t[15]*e[13],s=t[12]*e[2]+t[13]*e[6]+t[14]*e[10]+t[15]*e[14],c=t[12]*e[3]+t[13]*e[7]+t[14]*e[11]+t[15]*e[15],r[12]=o,r[13]=i,r[14]=s,r[15]=c,r}static invert(t,e){e=e||new Float32Array(16);let r=t[0],o=t[1],i=t[2],s=t[3],c=t[4],h=t[5],y=t[6],A=t[7],w=t[8],L=t[9],F=t[10],g=t[11],U=t[12],v=t[13],z=t[14],S=t[15],f=F*S-g*z,P=L*S-g*v,B=L*z-F*v,O=w*S-g*U,D=w*z-F*U,j=w*v-L*U,X=h*f-y*P+A*B,Z=-(c*f-y*O+A*D),J=c*P-h*O+A*j,Q=-(c*B-h*D+y*j),m=1/(r*X+o*Z+i*J+s*Q),$=y*S-A*z,tt=h*S-A*v,et=h*z-y*v,rt=c*S-A*U,nt=c*z-y*U,ot=c*v-h*U,it=y*g-A*F,at=h*g-A*L,st=h*F-y*L,ct=c*g-A*w,ut=c*F-y*w,lt=c*L-h*w;return e[0]=X*m,t[4]=Z*m,e[8]=J*m,t[12]=Q*m,e[1]=-(o*f-i*P+s*B)*m,e[5]=(r*f-i*O+s*D)*m,e[9]=-(r*P-o*O+s*j)*m,e[13]=(r*B-o*D+i*j)*m,e[2]=(o*$-i*tt+s*et)*m,e[6]=-(r*$-i*rt+s*nt)*m,e[10]=(r*tt-o*rt+s*ot)*m,e[14]=-(r*et-o*nt+i*ot)*m,e[3]=-(o*it-i*at+s*st)*m,e[7]=(r*it-i*ct+s*ut)*m,e[11]=-(r*at-o*ct+s*lt)*m,e[15]=(r*st-o*ut+i*lt)*m,e}static copy(t,e){return t===e||(e=e||new Float32Array(16),e.set(t)),e}static transpose(t,e){if(e=e||new Float32Array(16),e===t){let f;return f=t[1],t[1]=t[4],t[4]=f,f=t[2],t[2]=t[8],t[8]=f,f=t[3],t[3]=t[12],t[12]=f,f=t[6],t[6]=t[9],t[9]=f,f=t[7],t[7]=t[13],t[13]=f,f=t[11],t[11]=t[14],t[14]=f,e}let r=t[0],o=t[1],i=t[2],s=t[3],c=t[4],h=t[5],y=t[6],A=t[7],w=t[8],L=t[9],F=t[10],g=t[11],U=t[12],v=t[13],z=t[14],S=t[15];return e[0]=r,e[1]=c,e[2]=w,e[3]=U,e[4]=o,e[5]=h,e[6]=L,e[7]=v,e[8]=i,e[9]=y,e[10]=F,e[11]=z,e[12]=s,e[13]=A,e[14]=g,e[15]=S,e}},V=class{static value(t=0,e=1){return Math.random()*(e-t)+t}};function Y(n){return n*(Math.PI/180)}var M=class{listeners;addEventListener(t,e){this.listeners===void 0&&(this.listeners=new Map),this.listeners.get(t)===void 0&&this.listeners.set(t,[]);let r=this.listeners.get(t);r.indexOf(e)===-1&&r.push(e)}hasEventListener(t,e){if(this.listeners===void 0)return!1;let r=this.listeners.get(t);return r!==void 0&&r.indexOf(e)!==-1}removeEventListener(t,e){if(this.listeners===void 0)return!1;let r=this.listeners.get(t);if(r!==void 0){let o=r.indexOf(e);if(o!==-1)return r.splice(o,1),!0}return!1}dispatchEvent(t){if(this.listeners===void 0)return;let e=this.listeners.get(t.type);if(e!==void 0){t.target=this;for(let r=0;r<e.length;r++)e[r].call(this,t)}}};var p=class extends M{needsUpdate=!0;worldMatrix=l.identity();viewMatrix=l.identity();position=a.zero;rotation=a.zero;scale=a.one;mesh;name;constructor(t,e,r){super(),this.name=t,e&&this.setPosition(e),r&&this.setRotation(r)}get forward(){return a.transform(a.forward,l.rotate(l.identity(),this.rotation))}setMesh(t){return this.mesh=t,this}setPosition(t,e,r){if(this.needsUpdate=!0,t instanceof a)return a.copy(t,this.position),this;if(typeof e=="number"&&typeof r=="number")return this.position.x=t,this.position.y=e,this.position.z=r,this;throw new Error("Invalid arguments")}setRotation(t,e,r){if(this.needsUpdate=!0,t instanceof a)return a.copy(t,this.rotation),this;if(typeof e=="number"&&typeof r=="number")return this.rotation.x=t%360,this.rotation.y=e%360,this.rotation.z=r%360,this;throw new Error("Invalid arguments")}setScale(t,e,r){if(this.needsUpdate=!0,t instanceof a)return a.copy(t,this.scale),this;if(typeof e=="number"&&typeof r=="number")return this.scale.x=t,this.scale.y=e,this.scale.z=r,this;throw new Error("Invalid arguments")}rotate(t,e,r){if(this.needsUpdate=!0,t instanceof a)return a.add(this.rotation,t,this.rotation),this;if(typeof e=="number"&&typeof r=="number")return this.rotation.x=(this.rotation.x+t)%360,this.rotation.y=(this.rotation.y+e)%360,this.rotation.z=(this.rotation.z+r)%360,this;throw new Error("Invalid arguments")}translate(t,e,r){if(this.needsUpdate=!0,t instanceof a)return a.add(this.position,t,this.position),this;if(typeof e=="number"&&typeof r=="number")return this.position.x=this.position.x+t,this.position.y=this.position.y+e,this.position.z=this.position.z+r,this;throw new Error("Invalid arguments")}getWorldMatrix(){return this.needsUpdate&&(l.setScalar(this.scale,this.worldMatrix),l.rotate(this.worldMatrix,this.rotation),l.multiply(this.worldMatrix,l.translation(this.position),this.worldMatrix),this.needsUpdate=!1),this.worldMatrix}getViewMatrix(){return this.needsUpdate&&(l.lookAt(this.position,a.add(this.position,this.forward),void 0,this.viewMatrix),this.needsUpdate=!1),this.viewMatrix}};var R=class extends p{projectionUpdated=!0;projectionMatrix=l.identity();fov;near;far;constructor(t,e,r){super(t,e,r),this.fov=.9,this.near=.1,this.far=2e4,globalThis.addEventListener("resize",()=>this.projectionUpdated=!0)}get aspect(){return globalThis.innerWidth/globalThis.innerHeight}getProjectionMatrix(){return this.projectionUpdated&&(l.perspectiveFovLH(this.fov,this.aspect,this.near,this.far,this.projectionMatrix),this.projectionUpdated=!1),this.projectionMatrix}};var x=class{static createProgramInfo(t,e=ye,r=Ae){let o=wt(t,e,r),i=Lt(t,o);return{program:o,uniformInfo:i,attributeInfo:{}}}static setUniforms(t,e){for(let[r,o]of Object.entries(e)){if(!(r in t.uniformInfo)){console.error("Invalid uniform: "+r);continue}t.uniformInfo[r].setter(o)}}static getContext(t){let e=t.getContext("webgl2");if(!e)throw new Error("Failed to get WebGL2 context of canvas");return e}static VAO(t,e,r){let o=t.createVertexArray();if(!o)throw new Error("Unable to create vao");return t.bindVertexArray(o),t.bindBuffer(t.ARRAY_BUFFER,t.createBuffer()),t.bufferData(t.ARRAY_BUFFER,r.vertices,t.STATIC_DRAW),q(t,e,"a_position",3,t.FLOAT,!1,3*4,0),t.bindBuffer(t.ARRAY_BUFFER,t.createBuffer()),t.bufferData(t.ARRAY_BUFFER,r.normals,t.STATIC_DRAW),q(t,e,"a_normal",3,t.FLOAT,!1,3*4,0),r.uvs?.length&&(t.bindBuffer(t.ARRAY_BUFFER,t.createBuffer()),t.bufferData(t.ARRAY_BUFFER,r.uvs,t.STATIC_DRAW),q(t,e,"a_texCoord",2,t.FLOAT,!0,2*4,0)),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,t.createBuffer()),t.bufferData(t.ELEMENT_ARRAY_BUFFER,r.triangles,t.STATIC_DRAW),o}};function q(n,t,e,r,o,i,s,c){let h=n.getAttribLocation(t,e);n.vertexAttribPointer(h,r,o,i,s,c),n.enableVertexAttribArray(h)}function wt(n,t,e){let r=n.createProgram();if(!r)throw new Error("Unable to create Program");return ft(n,r,t,zt),ft(n,r,e,vt),n.linkProgram(r),n.validateProgram(r),n.getProgramParameter(r,gt)||console.error(`Program linking failed:

`,n.getProgramInfoLog(r)),n.getProgramParameter(r,Ut)||console.error(`Program validation failed:

`,n.getProgramInfoLog(r)),n.enable(n.DEPTH_TEST),n.enable(n.CULL_FACE),n.frontFace(n.CW),n.cullFace(n.BACK),n.useProgram(r),r}function ft(n,t,e,r){let o=n.createShader(r);if(!o)throw new Error("Unable to create Shader");if(n.shaderSource(o,e),n.compileShader(o),!n.getShaderParameter(o,Ft))throw new Error(`Unable to compile Shader.

`+n.getShaderInfoLog(o));return n.attachShader(t,o),o}function Lt(n,t){let e={},r=n.getProgramParameter(t,n.ACTIVE_UNIFORMS);for(let o=0;o<r;o++){let i=n.getActiveUniform(t,o);if(!i)continue;let s=n.getUniformLocation(t,i.name);e[i.name]={location:n.getUniformLocation(t,i.name),setter:u[i.type].setter(n,s)}}return e}var Ft=35713,gt=35714,Ut=35715,vt=35632,zt=35633,St=5126,Tt=35664,Vt=35665,dt=35666,Mt=5124,Rt=35667,Ct=35668,Et=35669,Gt=35670,It=35671,Wt=35672,_t=35673,Pt=35674,Bt=35685,Ot=35686,Dt=35675,jt=35687,kt=35688,Nt=35676,Ht=35689,Yt=35690,qt=5125,Kt=36294,Xt=36295,Zt=36296,u={};u[St]={type:Float32Array,size:4,setter:Jt,cols:1};u[Tt]={type:Float32Array,size:8,setter:Qt,cols:2};u[Vt]={type:Float32Array,size:12,setter:$t,cols:3};u[dt]={type:Float32Array,size:16,setter:te,cols:4};u[Mt]={type:Int32Array,size:4,setter:mt,cols:1};u[Rt]={type:Int32Array,size:8,setter:ht,cols:2};u[Ct]={type:Int32Array,size:12,setter:yt,cols:3};u[Et]={type:Int32Array,size:16,setter:At,cols:4};u[qt]={type:Uint32Array,size:4,setter:ee,cols:1};u[Kt]={type:Uint32Array,size:8,setter:re,cols:2};u[Xt]={type:Uint32Array,size:12,setter:ne,cols:3};u[Zt]={type:Uint32Array,size:16,setter:oe,cols:4};u[Gt]={type:Uint32Array,size:4,setter:mt,cols:1};u[It]={type:Uint32Array,size:8,setter:ht,cols:2};u[Wt]={type:Uint32Array,size:12,setter:yt,cols:3};u[_t]={type:Uint32Array,size:16,setter:At,cols:4};u[Pt]={type:Float32Array,size:32,setter:ie,rows:2,cols:2};u[Dt]={type:Float32Array,size:48,setter:ae,rows:3,cols:3};u[Nt]={type:Float32Array,size:64,setter:se,rows:4,cols:4};u[Bt]={type:Float32Array,size:32,setter:ce,rows:2,cols:3};u[Ot]={type:Float32Array,size:32,setter:le,rows:2,cols:4};u[jt]={type:Float32Array,size:48,setter:ue,rows:3,cols:2};u[kt]={type:Float32Array,size:48,setter:me,rows:3,cols:4};u[Ht]={type:Float32Array,size:64,setter:fe,rows:4,cols:2};u[Yt]={type:Float32Array,size:64,setter:he,rows:4,cols:3};function Jt(n,t){return function(e){n.uniform1fv(t,e)}}function Qt(n,t){return function(e){n.uniform2fv(t,e)}}function $t(n,t){return function(e){n.uniform3fv(t,e)}}function te(n,t){return function(e){n.uniform4fv(t,e)}}function mt(n,t){return function(e){n.uniform1iv(t,e)}}function ht(n,t){return function(e){n.uniform2iv(t,e)}}function yt(n,t){return function(e){n.uniform3iv(t,e)}}function At(n,t){return function(e){n.uniform4iv(t,e)}}function ee(n,t){return function(e){n.uniform1uiv(t,e)}}function re(n,t){return function(e){n.uniform2uiv(t,e)}}function ne(n,t){return function(e){n.uniform3uiv(t,e)}}function oe(n,t){return function(e){n.uniform4uiv(t,e)}}function ie(n,t){return function(e){n.uniformMatrix2fv(t,!1,e)}}function ae(n,t){return function(e){n.uniformMatrix3fv(t,!1,e)}}function se(n,t){return function(e){n.uniformMatrix4fv(t,!1,e)}}function ce(n,t){return function(e){n.uniformMatrix2x3fv(t,!1,e)}}function ue(n,t){return function(e){n.uniformMatrix3x2fv(t,!1,e)}}function le(n,t){return function(e){n.uniformMatrix2x4fv(t,!1,e)}}function fe(n,t){return function(e){n.uniformMatrix4x2fv(t,!1,e)}}function me(n,t){return function(e){n.uniformMatrix3x4fv(t,!1,e)}}function he(n,t){return function(e){n.uniformMatrix4x3fv(t,!1,e)}}var ye=`#version 300 es

    uniform mat4 u_world;
    uniform mat4 u_view;
    uniform mat4 u_proj;

    in vec3 a_position;
    in vec3 a_normal;

    out vec3 v_normal;

    void main() {
        // v_normal = a_normal;
        v_normal = mat3(u_world) * a_normal;
        gl_Position = u_proj * u_view * u_world * vec4(a_position, 1.0);
    }
`,Ae=`#version 300 es
    precision mediump float;

    uniform vec4 u_color;

    in vec3 v_normal;

    out vec4 f_color;

    void main() {
        vec3 normal = normalize(v_normal);
        float light = dot(normal, vec3(0.5, 0.7, -1.0)) * 0.5 + 0.5;
        //f_color = vec4(normal, 1.0); 
        f_color = u_color;
        f_color.rgb *= light;
    }
`;var C=class{gl;canvas;programInfo;constructor(t){this.canvas=t,this.gl=x.getContext(t),this.programInfo=x.createProgramInfo(this.gl),this.gl.clearColor(.3,.6,.8,1),this.resizeCanvas(),globalThis.addEventListener("resize",()=>this.resizeCanvas)}render(t,e){this.gl.clear(this.gl.COLOR_BUFFER_BIT),x.setUniforms(this.programInfo,{u_view:e.getViewMatrix(),u_proj:e.getProjectionMatrix()});for(let r of t.objects)r.mesh&&(r.mesh.vao||(r.mesh.vao=x.VAO(this.gl,this.programInfo.program,r.mesh)),x.setUniforms(this.programInfo,{u_world:r.getWorldMatrix(),u_color:r.mesh.material.f32()}),this.gl.bindVertexArray(r.mesh.vao),this.gl.drawElements(this.gl.TRIANGLES,r.mesh.triangles.length,this.gl.UNSIGNED_SHORT,0))}resizeCanvas(t=1){this.gl.canvas.width=globalThis.innerWidth*t,this.gl.canvas.height=globalThis.innerHeight*t,this.gl.viewport(0,0,this.gl.canvas.width,this.gl.canvas.height)}};var d=class{r;g;b;constructor(t,e,r){this.r=t,this.g=e,this.b=r}static get red(){return new this(1,0,0)}static get green(){return new this(0,1,0)}static get blue(){return new this(0,0,1)}static get white(){return new this(1,1,1)}static get black(){return new this(0,0,0)}static get aqua(){return new this(.75,.85,.8)}};var b=class n{color;opacity=1;constructor(t){this.color=t}static get default(){return new n(new d(1,0,1))}static get random(){return new n(new d(V.value(),V.value(),V.value()))}f32(){return new Float32Array([this.color.r,this.color.g,this.color.b,this.opacity])}};var T=class n{vertices;normals;triangles;uvs;material=b.default;vao;constructor(t,e,r){this.vertices=t,this.normals=e,this.triangles=r}static Cube(){let t=new Float32Array([-.5,-.5,-.5,-.5,.5,-.5,.5,-.5,-.5,.5,.5,-.5,-.5,-.5,.5,-.5,.5,.5,.5,-.5,.5,.5,.5,.5]),e=new Float32Array([-1,-1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,-1,1,-1,1,1,1,-1,1,1,1,1]),r=new Uint16Array([0,1,3,0,3,2,2,3,7,2,7,6,6,7,5,6,5,4,4,5,1,4,1,0,1,5,7,1,7,3,4,0,2,4,2,6]);return new n(t,e,r)}static Pyramid(){let t=new Float32Array([0,.5,0,-.5,-.5,.5,.5,-.5,.5,.5,-.5,-.5,-.5,-.5,-.5]),e=new Float32Array([0,1,0,-1,0,1,1,0,1,1,0,-1,-1,0,-1]),r=new Uint16Array([0,1,2,0,2,3,0,3,4,0,4,1,1,4,2,2,4,3]);return new n(t,e,r)}static Plane(){let t=new Float32Array([-.5,0,-.5,-.5,0,.5,.5,0,-.5,.5,0,.5]),e=new Float32Array([0,1,0,0,1,0,0,1,0,0,1,0]),r=new Uint16Array([0,1,2,2,1,3]);return new n(t,e,r)}};var E=class{objects=[];constructor(...t){for(let e of t)this.add(e)}add(t){this.objects.push(t)}};var G=class{movement;rotation;constructor(){this.movement=a.zero,this.rotation=a.zero,document.addEventListener("keydown",t=>this.onKey(t)),document.addEventListener("keyup",t=>this.onKey(t))}onKey(t){let e=t.type==="keydown";switch(t.key){case"w":case"W":this.movement.z=e?1:0;break;case"s":case"S":this.movement.z=e?-1:0;break;case"a":case"A":this.movement.x=e?-1:0;break;case"d":case"D":this.movement.x=e?1:0;break;case"Shift":this.movement.y=e?-1:0;break;case" ":this.movement.y=e?1:0;break;case"ArrowDown":this.rotation.x=e?1:0;break;case"ArrowUp":this.rotation.x=e?-1:0;break;case"ArrowLeft":this.rotation.y=e?-1:0;break;case"ArrowRight":this.rotation.y=e?1:0;break}}};var I=class{autoStart;startTime;oldTime;elapsedTime;running;constructor(t=!0){this.autoStart=t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=performance.now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){let e=performance.now();t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t}return t}};var pe=new C(document.querySelector("canvas")),k=new R("main").setPosition(0,2,-6),N=new p("cube").setMesh(T.Cube()),H=new p("pyramid",new a(-1,0,0)).setMesh(T.Pyramid()),xt=new p("floor").setMesh(T.Plane()).setScale(10,1,10);N.mesh.material=b.random;H.mesh.material=b.random;xt.mesh.material=b.random;var xe=new E(N,H,xt),W=new G,pt=new I,_,K;function bt(){_=pt.getDelta(),K=pt.elapsedTime,N.rotate(0,90*_,0),H.rotate(0,90*-_,0),N.setPosition(1,Math.sin(2*K)+1.5,0),H.setPosition(-1,Math.cos(2*K)+1.5,0),be(_),pe.render(xe,k),requestAnimationFrame(bt)}requestAnimationFrame(bt);function be(n){if(k.rotate(a.scale(W.rotation,_*80)),a.equals(W.movement,a.zero))return;let r=new a(W.movement.x,0,W.movement.z);a.normalize(r,r);let o=a.transform(r,l.rotate(l.identity(),k.rotation));o.y=0,a.normalize(o,o),o.y=W.movement.y,k.translate(a.scale(o,n*10))}
//# sourceMappingURL=index.js.map
